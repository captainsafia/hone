---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import CodeBlock from '../components/CodeBlock.astro';

const features = [
  {
    title: 'Text Format',
    description: 'Simple, line-oriented DSL that\'s easy to read, write, and version control.'
  },
  {
    title: 'Real Shell',
    description: 'Commands run in actual shell sessions with persistent state and variables.'
  },
  {
    title: 'Rich Assertions',
    description: 'Assert on stdout, stderr, exit codes, files, timing, and regex patterns.'
  },
  {
    title: 'Single Binary',
    description: 'No runtime dependencies. Written in Rust for speed and reliability.'
  },
  {
    title: 'LSP Support',
    description: 'Built-in language server with completions, diagnostics, and hover docs.'
  },
  {
    title: 'Agent Friendly',
    description: 'Designed for AI agents to read, write, and understand test files.'
  },
];

const heroCode = `TEST "my CLI works"

RUN mycli init --name myproject
ASSERT exit_code == 0
ASSERT stdout contains "Project created"

RUN mycli build
ASSERT exit_code == 0
ASSERT file "dist/output.js" exists`;

const installCode = `# Install with the installer script
curl https://i.safia.sh/captainsafia/hone | sh

# Run your first test
hone run tests/*.hone`;
---

<BaseLayout title="Home">
  <Header currentPath="/" />
  
  <main class="flex-1">
    <!-- Hero Section -->
    <section class="relative overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-br from-electric-blue/5 via-transparent to-soft-violet/5"></div>
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-20 md:py-28 relative">
        <div class="text-center max-w-3xl mx-auto mb-12">
          <!-- Mascot -->
          <div class="mb-6">
            <svg class="w-20 h-20 mx-auto animate-bounce-slow" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
              <!-- Window body -->
              <rect x="3" y="6" width="26" height="20" rx="3" fill="#1E1E2E"/>
              <!-- Title bar -->
              <rect x="3" y="6" width="26" height="5" rx="3" fill="#61AFEF"/>
              <rect x="3" y="9" width="26" height="2" fill="#61AFEF"/>
              <!-- Window buttons -->
              <circle cx="7" cy="8.5" r="1.2" fill="#E06C75"/>
              <circle cx="11" cy="8.5" r="1.2" fill="#E5C07B"/>
              <circle cx="15" cy="8.5" r="1.2" fill="#98C379"/>
              <!-- Eyes -->
              <circle cx="11" cy="17" r="2" fill="#61AFEF"/>
              <circle cx="21" cy="17" r="2" fill="#61AFEF"/>
              <!-- Eye shine -->
              <circle cx="10" cy="16" r="0.7" fill="white"/>
              <circle cx="20" cy="16" r="0.7" fill="white"/>
              <!-- Happy smile -->
              <path d="M13 21 Q16 24 19 21" stroke="#98C379" stroke-width="1.5" stroke-linecap="round" fill="none"/>
            </svg>
          </div>
          <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight mb-6">
            Integration testing for
            <span class="text-electric-blue">command-line apps</span>
          </h1>
          <p class="text-lg md:text-xl text-light-text-muted mb-8 max-w-2xl mx-auto">
            Agent and human friendly CLI testing. Write readable tests, run real commands, assert on output. Simple as that.
          </p>
          <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
            <a href="/docs/installation" class="group btn-primary">
              Install Hone
              <svg class="w-4 h-4 ml-2 transition-transform group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
              </svg>
            </a>
            <a href="https://github.com/captainsafia/hone" target="_blank" rel="noopener noreferrer" class="group btn-secondary">
              <svg class="w-5 h-5 mr-2 transition-transform group-hover:scale-125" fill="currentColor" viewBox="0 0 24 24">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0012 2z"/>
              </svg>
              View on GitHub
            </a>
          </div>
        </div>
        
        <!-- Code snippet as main visual element -->
        <div class="max-w-2xl mx-auto">
          <CodeBlock code={heroCode} filename="test.hone" />
        </div>
      </div>
    </section>
    
    <!-- Quick Install Section -->
    <section class="py-12 border-y border-light-border">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex flex-col md:flex-row items-center gap-8">
          <div class="flex-1 text-center md:text-left">
            <h2 class="text-xl font-semibold mb-2">Get started in seconds</h2>
            <p class="text-light-text-muted">Single binary, no dependencies. Works on Linux and macOS.</p>
          </div>
          <div class="flex-1 w-full">
            <div class="font-mono text-sm bg-charcoal rounded-lg p-4 text-white overflow-x-auto">
              <div class="flex items-center gap-2">
                <span class="text-spring-green">$</span>
                <span>curl https://i.safia.sh/captainsafia/hone/preview | sh</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Features Section -->
    <section class="py-20 md:py-28">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-2xl md:text-3xl font-bold mb-12 text-center">Why Hone?</h2>
        
        <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-x-12 gap-y-8">
          {features.map((feature) => (
            <div class="group">
              <h3 class="font-semibold mb-1 group-hover:text-electric-blue transition-colors">{feature.title}</h3>
              <p class="text-light-text-muted text-sm">{feature.description}</p>
            </div>
          ))}
        </div>
      </div>
    </section>
    
    <!-- How It Works Section -->
    <section class="py-16 md:py-20 bg-light-surface">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-2xl md:text-3xl font-bold mb-8 text-center">How It Works</h2>
        
        <div class="grid md:grid-cols-3 gap-8 text-center">
          <div class="group">
            <div class="text-3xl font-bold text-electric-blue mb-2 group-hover:scale-110 transition-transform">1</div>
            <p class="text-sm text-light-text-muted">Write a <code class="text-electric-blue">.hone</code> test file</p>
          </div>
          <div class="group">
            <div class="text-3xl font-bold text-electric-blue mb-2 group-hover:scale-110 transition-transform">2</div>
            <p class="text-sm text-light-text-muted">Run <code class="text-electric-blue">hone run tests/</code></p>
          </div>
          <div class="group">
            <div class="text-3xl font-bold text-electric-blue mb-2 group-hover:scale-110 transition-transform">3</div>
            <p class="text-sm text-light-text-muted">Get clear pass/fail results</p>
          </div>
        </div>
      </div>
    </section>
  </main>
  
  <Footer />
</BaseLayout>
